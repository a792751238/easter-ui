{"version":3,"sources":["../../../../src/kiana/functions/index.js"],"names":["debounce","throttle","func","wait","immediate","timeout","result","debounced","context","args","arguments","clearTimeout","callnow","setTimeout","apply","cancel","options","previous_time","later","leading","Date","now","throttled","now_time","remaining","console","log","trailing"],"mappings":";;;;;AAAA;;;;QAKIA,Q,GAAAA,Q;QACAC,Q,GAAAA,Q;;AAGJ;;;;;;;;AAOA,SAASD,QAAT,CAAkBE,IAAlB,EAAwBC,IAAxB,EAA8BC,SAA9B,EAAyC;AACrC,QAAIC,OAAJ,EAAaC,MAAb;AACA,QAAIC,YAAY,SAAZA,SAAY,GAAY;AACxB,YAAIC,UAAU,IAAd;AACA,YAAIC,OAAOC,SAAX;;AAEA,YAAIL,OAAJ,EAAaM,aAAaN,OAAb;;AAEb,YAAID,SAAJ,EAAe;AACX,gBAAIQ,UAAU,CAACP,OAAf;AACAA,sBAAUQ,WAAW,YAAY;AAC7BR,0BAAU,IAAV;AACH,aAFS,EAEPF,IAFO,CAAV;AAGA,gBAAIS,OAAJ,EAAaN,SAASJ,KAAKY,KAAL,CAAWN,OAAX,EAAoBC,IAApB,CAAT;AAChB,SAND,MAMO;AACHJ,sBAAUQ,WAAW,YAAY;AAC7BX,qBAAKY,KAAL,CAAWN,OAAX,EAAoBC,IAApB;AACH,aAFS,EAEPN,IAFO,CAAV;AAGH;AACD,eAAOG,MAAP;AACH,KAlBD;;AAoBAC,cAAUQ,MAAV,GAAmB,YAAY;AAC3BJ,qBAAaN,OAAb;AACAA,kBAAU,IAAV;AACH,KAHD;;AAKA,WAAOE,SAAP;AACH;;AAED;;;;;;;AAOA,SAASN,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8Ba,OAA9B,EAAuC;AACnC,QAAIX,OAAJ,EAAaG,OAAb,EAAsBC,IAAtB,EAA4BH,MAA5B;AACA,QAAIW,gBAAgB,CAApB;AACA,QAAI,CAACD,OAAL,EAAcA,UAAU,EAAV;;AAEd,QAAIE,QAAQ,SAARA,KAAQ,GAAY;AACpB;AACAD,wBAAgBD,QAAQG,OAAR,KAAoB,KAApB,GAA4B,CAA5B,GAAgCC,KAAKC,GAAL,EAAhD;AACAhB,kBAAU,IAAV;AACAH,aAAKY,KAAL,CAAWZ,IAAX,EAAiBO,IAAjB;AACA,YAAI,CAACJ,OAAL,EAAcG,UAAUC,OAAO,IAAjB;AACjB,KAND;;AAQA,QAAIa,YAAY,SAAZA,SAAY,GAAY;AACxB,YAAIC,WAAWH,KAAKC,GAAL,EAAf;AACA,YAAI,CAACJ,aAAD,IAAkBD,QAAQG,OAAR,KAAoB,KAA1C,EAAiDF,gBAAgBM,QAAhB;AACjD;AACA,YAAIC,YAAYrB,QAAQoB,WAAWN,aAAnB,CAAhB;AACAT,kBAAU,IAAV;AACAC,eAAOC,SAAP;AACA;AACA,YAAIc,aAAa,CAAb,IAAkBA,YAAYrB,IAAlC,EAAwC;AACpC,gBAAIE,OAAJ,EAAa;AACTM,6BAAaN,OAAb;AACAA,0BAAU,IAAV;AACH;AACDY,4BAAgBM,QAAhB;AACAE,oBAAQC,GAAR,CAAYF,SAAZ;AACAtB,iBAAKY,KAAL,CAAWN,OAAX,EAAoBC,IAApB;AACA,gBAAI,CAACJ,OAAL,EAAcG,UAAUC,OAAO,IAAjB;AACjB,SATD,MASO,IAAI,CAACJ,OAAD,IAAYW,QAAQW,QAAR,KAAqB,KAArC,EAA4C;AAC/C;AACAtB,sBAAUQ,WAAWK,KAAX,EAAkBM,SAAlB,CAAV;AACH;AACJ,KArBD;;AAuBAF,cAAUP,MAAV,GAAmB,YAAY;AAC3BJ,qBAAaN,OAAb;AACAY,wBAAgB,CAAhB;AACAZ,kBAAU,IAAV;AACH,KAJD;;AAMA,WAAOiB,SAAP;AACH","file":"index.js","sourcesContent":["/**\r\n * Created by easterCat on 2018/1/24.\r\n */\r\n\r\nexport {\r\n    debounce,\r\n    throttle\r\n}\r\n\r\n/**\r\n * 函数防抖\r\n * @param func\r\n * @param wait\r\n * @param immediate\r\n * @returns {debounced}\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout, result;\r\n    var debounced = function () {\r\n        var context = this;\r\n        var args = arguments;\r\n\r\n        if (timeout) clearTimeout(timeout);\r\n\r\n        if (immediate) {\r\n            var callnow = !timeout;\r\n            timeout = setTimeout(function () {\r\n                timeout = null;\r\n            }, wait);\r\n            if (callnow) result = func.apply(context, args);\r\n        } else {\r\n            timeout = setTimeout(function () {\r\n                func.apply(context, args);\r\n            }, wait);\r\n        }\r\n        return result;\r\n    };\r\n\r\n    debounced.cancel = function () {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n    };\r\n\r\n    return debounced;\r\n}\r\n\r\n/**\r\n * 函数节流 鼠标移入能立刻执行，停止触发的时候还能再执行一次！\r\n * @param func 回调函数\r\n * @param wait 延时时间\r\n * @param options leading:false禁用第一次执行,trailing: false 禁用结束后再执行一次\r\n * @returns {throttled}\r\n */\r\nfunction throttle(func, wait, options) {\r\n    var timeout, context, args, result;\r\n    var previous_time = 0;\r\n    if (!options) options = {};\r\n\r\n    var later = function () {\r\n        //leading为false将初始时间设为0\r\n        previous_time = options.leading === false ? 0 : Date.now();\r\n        timeout = null;\r\n        func.apply(func, args);\r\n        if (!timeout) context = args = null;\r\n    };\r\n\r\n    var throttled = function () {\r\n        var now_time = Date.now();\r\n        if (!previous_time && options.leading === false) previous_time = now_time;\r\n        //下次触发func的剩余时间\r\n        var remaining = wait - (now_time - previous_time);\r\n        context = this;\r\n        args = arguments;\r\n        // 如果没有剩余的时间了或者你改了系统时间,则进行首次执行\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous_time = now_time;\r\n            console.log(remaining);\r\n            func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        } else if (!timeout && options.trailing !== false) {\r\n            //条件满足，利用延时函数在结束后再执行一次\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n    };\r\n\r\n    throttled.cancel = function () {\r\n        clearTimeout(timeout);\r\n        previous_time = 0;\r\n        timeout = null;\r\n    };\r\n\r\n    return throttled;\r\n}"]}