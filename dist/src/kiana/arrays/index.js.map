{"version":3,"sources":["../../../../src/kiana/arrays/index.js"],"names":["difference","flatten","findIndex","findLastIndex","sortedIndex","indexOf","lastIndexOf","unique","without","max","min","input","shallow","strict","startIndex","output","idx","i","length","value","j","len","array","Array","prototype","slice","call","arguments","rest","filter","item","isSorted","iteratee","res","seen","computed","push","obj","context","result","Infinity","lastComputed","_cb","forEach","index","list","callback","_createIndexFinder","_createIndexOfFinder","low","high","mid","Math","floor","dir","predicate","isNaN","fn","arg"],"mappings":"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","file":"index.js","sourcesContent":["import {\r\n    isArrayLike,\r\n    isArray,\r\n    values,\r\n} from '../objects/index';\r\n\r\nexport {\r\n    difference,\r\n    flatten,\r\n    findIndex,\r\n    findLastIndex,\r\n    sortedIndex,\r\n    indexOf,\r\n    lastIndexOf,\r\n    unique,\r\n    without,\r\n    max,\r\n    min\r\n}\r\n\r\n/**\r\n * 数组扁平化\r\n * _.flatten/\r\n * @param  {Array} input   要处理的数组\r\n * @param  {boolean} shallow true只扁平一层,false为全部展开\r\n * @param  {boolean} strict  是否严格处理元素，下面有解释\r\n * @param  {Number} startIndex  开始查找的起始位置\r\n * 源码地址：https://github.com/jashkenas/underscore/blob/master/underscore.js#L528\r\n */\r\nfunction flatten(input, shallow, strict, startIndex) {\r\n    // 递归使用的时候会用到output\r\n    var output = [], idx = 0;\r\n\r\n    for (var i = startIndex || 0, length = input.length; i < length; i++) {\r\n        var value = input[i];\r\n        // 数组 或者 arguments，就进行处理\r\n        // if (isArrayLike(value) && (isArray(value) || _.isArguments(value))) {\r\n        if (isArrayLike(value) && (isArray(value))) {\r\n            // 如果是全部扁平就递归，传入已经处理的 output，递归中接着处理 output\r\n            if (!shallow) {\r\n                value = flatten(value, shallow, strict);\r\n            }\r\n            var j = 0, len = value.length;\r\n            output.length += len;\r\n            while (j < len) output[idx++] = value[j++];\r\n        }\r\n        // 不是数组，根据 strict 的值判断是跳过不处理还是放入 output\r\n        else if (!strict) {\r\n            output[idx++] = value;\r\n        }\r\n    }\r\n    return output;\r\n}\r\n\r\n/**\r\n * 返回一个删除所有指定值后的 array副本\r\n * @param array\r\n * @returns {*}\r\n */\r\nfunction without(array) {\r\n    // slice.call(arguments, 1)将 arguments 转为数组（同时去掉第一个元素）\r\n    // 之后便可以调用 _.difference 方法\r\n    return difference(array, Array.prototype.slice.call(arguments, 1));\r\n}\r\n\r\nfunction difference(array) {\r\n    //将参数数组展开一层\r\n    var rest = flatten(arguments, true, true, 1);\r\n    return array.filter(function (item) {\r\n        return rest.indexOf(item) === -1;\r\n    })\r\n}\r\n\r\n/**\r\n * 数组去重\r\n * @param array 传入的数组\r\n * @param isSorted 判断是否是已经排序过得数组\r\n * @param iteratee 迭代函数\r\n * @returns {Array}\r\n */\r\nfunction unique(array, isSorted, iteratee) {\r\n    var res = [];\r\n    var seen = [];\r\n\r\n    for (var i = 0; i < array.length; i++) {\r\n        var item = array[i];\r\n        //如果迭代函数存在，就返回操作后的值\r\n        var computed = iteratee ? iteratee(item, i, array) : item;\r\n        if (isSorted) {\r\n            if (!i || seen !== computed) {\r\n                res.push(item);\r\n            }\r\n            seen = computed;\r\n        } else if (iteratee) {\r\n            if (seen.indexOf(computed) === -1) {\r\n                seen.push(computed);\r\n                res.push(item);\r\n            }\r\n        } else if (res.indexOf(item) === -1) {\r\n            res.push(item);\r\n        }\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\n\r\n/**\r\n * 获取数组中最大值\r\n * @param obj 传入的数组或对象\r\n * @param iteratee 迭代函数\r\n * @param context\r\n * @returns {number}\r\n */\r\nfunction max(obj, iteratee, context) {\r\n    var result = -Infinity,\r\n        computed,\r\n        lastComputed = -Infinity,\r\n        item;\r\n\r\n    //如果只是传入数组或对象，没有迭代函数，则正常比较\r\n    if (!iteratee && obj) {\r\n        obj = isArrayLike(obj) ? obj : values(obj);\r\n\r\n        for (var i = 0, length = obj.length; i < length; i++) {\r\n            item = obj[i];\r\n            if (item > result) {\r\n                result = item;\r\n            }\r\n        }\r\n    } else {\r\n        iteratee = _cb(iteratee, context);\r\n\r\n        // result 保存结果元素\r\n        // lastComputed 保存计算过程中出现的最值\r\n        // 遍历元素\r\n        obj.forEach(function (value, index, list) {\r\n            computed = iteratee(value, index, list);//迭代后的值\r\n            // && 的优先级高于 ||\r\n            if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\r\n                result = value;\r\n                lastComputed = computed;\r\n            }\r\n        })\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * 获取数组中最小值\r\n * @param obj\r\n * @param iteratee\r\n * @param context\r\n * @returns {Number}\r\n */\r\nfunction min(obj, iteratee, context) {\r\n    var result = Infinity, item, computed, lastComputed = Infinity;\r\n\r\n    if (!iteratee && obj) {\r\n        obj = isArrayLike(obj) ? obj : values(obj);\r\n\r\n        for (var i = 0, length = obj.length; i < length; i++) {\r\n            item = obj[i];\r\n\r\n            if (item < result) {\r\n                result = item;\r\n            }\r\n        }\r\n    } else {\r\n        iteratee = _cb(iteratee, context);\r\n\r\n        obj.forEach(function (value, index, list) {\r\n            //类似于iteratee.call(context,value,index,list);\r\n            computed = iteratee(value, index, list);\r\n\r\n            if (computed < lastComputed || computed === Infinity && result === Infinity) {\r\n                result = value;\r\n                lastComputed = computed;\r\n            }\r\n        })\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction findIndex(array, callback, context) {\r\n    return _createIndexFinder(1);\r\n}\r\n\r\nfunction findLastIndex(array, callback, context) {\r\n    return _createIndexFinder(-1);\r\n}\r\n\r\n\r\nfunction indexOf(array, item) {\r\n    return _createIndexOfFinder(1, findIndex, sortedIndex);\r\n}\r\n\r\nfunction lastIndexOf(array, item) {\r\n    return _createIndexOfFinder(-1, findLastIndex);\r\n}\r\n\r\n\r\nfunction sortedIndex(array, obj, iteratee, context) {\r\n    iteratee = _cb(iteratee, context);\r\n    var low = 0;\r\n    var high = array.length;\r\n    while (low < high) {\r\n        var mid = Math.floor((low + high) / 2);\r\n        if (iteratee(array[mid]) < iteratee(obj)) {\r\n            low = mid + 1;\r\n        } else {\r\n            high = mid;\r\n        }\r\n    }\r\n    return high;\r\n}\r\n\r\n\r\nfunction _createIndexFinder(dir) {\r\n    return function (array, callback, context) {\r\n        var length = array.length;\r\n        var index = dir > 0 ? 0 : length - 1;\r\n\r\n        for (; index >= 0 && index < length; index += dir) {\r\n            if (callback.call(context, array[index], index, array)) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nfunction _createIndexOfFinder(dir, predicate, sortedIndex) {\r\n    //idx设定开始查找的位置\r\n    return function (array, item, idx) {\r\n        var length = array.length;\r\n        var i = 0;\r\n\r\n        if (typeof idx === 'number') {\r\n            if (idx > 0) {\r\n                i = idx >= 0 ? idx : Math.max(length + idx, 0);\r\n            } else {\r\n                length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\r\n            }\r\n        }\r\n\r\n        else if (sortedIndex && idx && length) {\r\n            idx = sortedIndex(array, item);\r\n            // 如果该插入的位置的值正好等于元素的值，说明是第一个符合要求的值\r\n            return array[idx] === item ? idx : -1;\r\n        }\r\n\r\n        // 判断是否是 NaN\r\n        if (item !== item) {\r\n            idx = predicate(array.slice(i, length), isNaN)\r\n            return idx >= 0 ? idx + i : -1;\r\n        }\r\n\r\n        for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\r\n            if (array[idx] === item) {\r\n                return idx;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nfunction _cb(fn, context) {\r\n    return function (arg) {\r\n        //如果回调函数存在，则执行回调函数，并且将传入的参数当做参数传入回调函数\r\n        //如果回调函数不存在，则直接将传入的参数返回，什么也不做\r\n        return fn ? fn.call(context, arg) : arg;\r\n    }\r\n}\r\n"]}